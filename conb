#contentbased

import numpy as np
import math

items = [
    "Action movie with car chase and explosions",
    "Romantic comedy about love and friendship",
    "Thriller with mystery and suspense",
    "Action-packed superhero adventure",
    "Emotional romantic drama"
]

tokenized = [i.lower().split() for i in items]
vocab = sorted(list(set(word for doc in items for word in doc)))

def tf(doc_tokens):
    tf = {}
    return np.array([doc_tokens.count(word)/len(items) for word in vocab])
    
tf_vecs = np.array([tf(doc) for doc in tokenized])

def cosine(a, b):
    num = np.dot(a, b)
    den = np.linalg.norm(a)*np.linalg.norm(b)
    return num/den if den!=0 else 0

def contentbased(index, top=2):
    sims = [(i, cosine(tf_vecs[index], tf_vecs[i])) for i in range(len(items)) if i!=index]
    sims = sorted(sims, key=lambda x: x[1], reverse=True)
    return [items[i] for i, _ in sims[:top]]

print(items[0])
print(contentbased(0))
